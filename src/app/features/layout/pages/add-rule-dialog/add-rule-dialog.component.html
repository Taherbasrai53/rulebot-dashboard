<mat-dialog-content class="dialog-container">
  <h2 class="dialog-title">Add New Rule</h2>

  <!-- Rule #1: Height & Width -->
  <form [formGroup]="form1" *ngIf="ruleType === 1" (ngSubmit)="save()">
    <div class="form-row">
    
      <mat-form-field appearance="outline" class="half-width">
        <mat-label>Process</mat-label>        
        <mat-select formControlName="process" [compareWith]="compareById">

          <mat-select-trigger>
            {{ form1.get('process')?.value?.processName || '' }}
          </mat-select-trigger>

          <mat-option *ngFor="let p of processes" [value]="p">
            <span class="process-option">
              <span class="pill-icon" *ngIf="p.processType">{{ p.processType }}</span>
              {{ p.processName }}
            </span>
          </mat-option>
        </mat-select>
      </mat-form-field>



      <mat-form-field appearance="outline" class="half-width">
        <mat-label>Stage</mat-label>
        <mat-select formControlName="stage" multiple>
          <mat-option *ngFor="let s of stages" [value]="s">{{ s }}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Pages</mat-label>
      <mat-select formControlName="pages" multiple>
        <mat-option *ngFor="let page of pages" [value]="page">{{ page }}</mat-option>
      </mat-select>
    </mat-form-field>

    <div class="form-row">
      <mat-form-field appearance="outline" class="half-width">
        <mat-label>Height</mat-label>
        <input matInput type="number" formControlName="height" />
      </mat-form-field>

      <mat-form-field appearance="outline" class="half-width">
        <mat-label>Width</mat-label>
        <input matInput type="number" formControlName="width" />
      </mat-form-field>
    </div>

    <mat-dialog-actions align="end">
      <button mat-stroked-button color="warn" type="button" (click)="cancel()">Cancel</button>
      <button mat-flat-button color="primary" type="submit">Save</button>
    </mat-dialog-actions>
  </form>

  <!-- Rule #2: Horizontal & Vertical Spacing -->
  <form [formGroup]="form2" *ngIf="ruleType === 2" (ngSubmit)="save()">
    <div class="form-row">
      <mat-form-field appearance="outline" class="half-width">
        <mat-label>Process</mat-label>
        <mat-select formControlName="process" [compareWith]="compareById">

          <mat-select-trigger>
            {{ form2.get('process')?.value?.processName || '' }}
          </mat-select-trigger>

          <mat-option *ngFor="let p of processes" [value]="p">
           <span class="process-option">
              <span class="pill-icon" *ngIf="p.processType">{{ p.processType }}</span>
              {{ p.processName }}
            </span>
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline" class="half-width">
        <mat-label>Stage</mat-label>
        <mat-select formControlName="stage" multiple>
          <mat-option *ngFor="let s of stages" [value]="s">{{ s }}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Pages</mat-label>
      <mat-select formControlName="pages" multiple>
        <mat-option *ngFor="let page of pages" [value]="page">{{ page }}</mat-option>
      </mat-select>
    </mat-form-field>

    <div class="form-row">
      <mat-form-field appearance="outline" class="half-width">
        <mat-label>Horizontal Spacing</mat-label>
        <input matInput type="number" formControlName="horizontalSpacing" />
      </mat-form-field>

      <mat-form-field appearance="outline" class="half-width">
        <mat-label>Vertical Spacing</mat-label>
        <input matInput type="number" formControlName="verticalSpacing" />
      </mat-form-field>
    </div>

    <mat-dialog-actions align="end">
      <button mat-stroked-button color="warn" type="button" (click)="cancel()">Cancel</button>
      <button mat-flat-button color="primary" type="submit">Save</button>
    </mat-dialog-actions>
  </form>

  <!-- Rule #3: Block Name, Data Item, Color -->
  <form [formGroup]="form3" *ngIf="ruleType === 3" (ngSubmit)="save()">
    <div class="form-row">
      <mat-form-field appearance="outline" class="half-width">
        <mat-label>Process</mat-label>
        <mat-select formControlName="process" [compareWith]="compareById">

          <mat-select-trigger>
            {{ form3.get('process')?.value?.processName || '' }}
          </mat-select-trigger>

          <mat-option *ngFor="let p of processes" [value]="p">
            <span class="process-option">
              <span class="pill-icon" *ngIf="p.processType">{{ p.processType }}</span>
              {{ p.processName }}
            </span>
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline" class="half-width">
        <mat-label>Stage</mat-label>
        <mat-select formControlName="stage" multiple>
          <mat-option *ngFor="let s of stages" [value]="s">{{ s }}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Pages</mat-label>
      <mat-select formControlName="pages" multiple>
        <mat-option *ngFor="let page of pages" [value]="page">{{ page }}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Block Name Starts With</mat-label>
      <input matInput formControlName="blockNamePrefix" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Data Item Starts With</mat-label>
      <input matInput formControlName="dataItemPrefix" />
    </mat-form-field>

    <div class="color-picker-wrapper">
      <label for="colorGradient">Color Gradient*</label>
      <input id="colorGradient" type="color" formControlName="colorGradient" />
    </div>

    <mat-dialog-actions align="end">
      <button mat-stroked-button color="warn" type="button" (click)="cancel()">Cancel</button>
      <button mat-flat-button color="primary" type="submit">Save</button>
    </mat-dialog-actions>
  </form>
</mat-dialog-content>
